[gd_scene load_steps=16 format=2]

[ext_resource path="res://Car.tscn" type="PackedScene" id=1]
[ext_resource path="res://Montserrat-Medium.ttf" type="DynamicFontData" id=2]
[ext_resource path="res://Main.gd" type="Script" id=3]
[ext_resource path="res://Camera.gd" type="Script" id=4]
[ext_resource path="res://icon.png" type="Texture" id=5]
[ext_resource path="res://Obstacle.tscn" type="PackedScene" id=6]
[ext_resource path="res://Ramp.tscn" type="PackedScene" id=7]

[sub_resource type="SpatialMaterial" id=1]
albedo_texture = ExtResource( 5 )
uv1_triplanar = true

[sub_resource type="CubeMesh" id=2]
material = SubResource( 1 )
size = Vector3( 1000, 1, 1000 )

[sub_resource type="ConcavePolygonShape" id=3]
data = PoolVector3Array( -500, 0.5, 500, 500, 0.5, 500, -500, -0.5, 500, 500, 0.5, 500, 500, -0.5, 500, -500, -0.5, 500, 500, 0.5, -500, -500, 0.5, -500, 500, -0.5, -500, -500, 0.5, -500, -500, -0.5, -500, 500, -0.5, -500, 500, 0.5, 500, 500, 0.5, -500, 500, -0.5, 500, 500, 0.5, -500, 500, -0.5, -500, 500, -0.5, 500, -500, 0.5, -500, -500, 0.5, 500, -500, -0.5, -500, -500, 0.5, 500, -500, -0.5, 500, -500, -0.5, -500, 500, 0.5, 500, -500, 0.5, 500, 500, 0.5, -500, -500, 0.5, 500, -500, 0.5, -500, 500, 0.5, -500, -500, -0.5, 500, 500, -0.5, 500, -500, -0.5, -500, 500, -0.5, 500, 500, -0.5, -500, -500, -0.5, -500 )

[sub_resource type="Curve" id=4]
_data = [ Vector2( 0, 0.5 ), 0.0, 0.0, 0, 0, Vector2( 0.406627, 1 ), 0.0, 0.0, 0, 0, Vector2( 0.689759, 1 ), 0.0, 0.0, 0, 0, Vector2( 1, 0.3 ), 0.0, 0.0, 0, 0 ]

[sub_resource type="Curve" id=7]
_data = [ Vector2( 0, 0.863636 ), 0.0, -0.2, 0, 0, Vector2( 0.4, 0.2 ), 0.0, 0.0, 0, 0, Vector2( 1, 0.2 ), 0.0, 0.0, 1, 0 ]

[sub_resource type="Curve" id=8]
_data = [ Vector2( 0, 0.545455 ), 0.0, -0.485714, 0, 1, Vector2( 0.336898, 0.381818 ), -0.708333, -0.708333, 0, 0, Vector2( 0.5, 0.2 ), -0.361703, -0.361703, 0, 0, Vector2( 1, 0.1 ), -0.2, 0.0, 1, 0 ]

[sub_resource type="DynamicFont" id=5]
size = 22
font_data = ExtResource( 2 )

[sub_resource type="Theme" id=6]
default_font = SubResource( 5 )

[node name="Main" type="Node"]
script = ExtResource( 3 )

[node name="Ground" type="StaticBody" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1, 0 )
collision_layer = 4
collision_mask = 3

[node name="MeshInstance" type="MeshInstance" parent="Ground"]
mesh = SubResource( 2 )

[node name="CollisionShape" type="CollisionShape" parent="Ground"]
shape = SubResource( 3 )

[node name="DirectionalLight" type="DirectionalLight" parent="."]
transform = Transform( 0.127844, -0.857157, 0.498937, 0, 0.503065, 0.864248, -0.991794, -0.110489, 0.0643137, 8.50783, 5.54741, 0 )
light_color = Color( 1, 0.960784, 0, 1 )
shadow_enabled = true

[node name="Car" parent="." instance=ExtResource( 1 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 6.70556, -498.17 )
engineForceCurve = SubResource( 4 )
front_grip_curve = SubResource( 7 )
rear_grip_curve = SubResource( 8 )
maxSpeed = 25
maxEngineForce = 120000
rr_coefficient = 0.005
brake_coefficient = 0.8
steering_speed_deg = 90.0
max_steering_angle_deg = 20.0

[node name="Camera" type="Camera" parent="Car"]
transform = Transform( -3.91864e-08, 0.0259153, -0.999664, -2.77614e-08, 0.999664, 0.0259153, 1, 2.87676e-08, -3.84538e-08, -3.81873, 0.985046, -0.0215454 )

[node name="UI" type="Control" parent="."]
anchor_right = 1.0
anchor_bottom = 1.0
theme = SubResource( 6 )

[node name="FR_offset" type="Label" parent="UI"]
margin_right = 40.0
margin_bottom = 14.0
custom_colors/font_color = Color( 0, 0, 0, 1 )
text = "FR: "

[node name="RR_offset" type="Label" parent="UI"]
margin_top = 40.0
margin_right = 40.0
margin_bottom = 54.0
custom_colors/font_color = Color( 0, 0, 0, 1 )
text = "RR: "

[node name="RL_offset" type="Label" parent="UI"]
margin_top = 80.0
margin_right = 40.0
margin_bottom = 94.0
custom_colors/font_color = Color( 0, 0, 0, 1 )
text = "RL:"
__meta__ = {
"_edit_use_anchors_": false
}

[node name="FL_offset" type="Label" parent="UI"]
margin_top = 120.0
margin_right = 40.0
margin_bottom = 134.0
custom_colors/font_color = Color( 0, 0, 0, 1 )
text = "FL:"
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Speed" type="Label" parent="UI"]
margin_top = 148.0
margin_right = 40.0
margin_bottom = 176.0
custom_colors/font_color = Color( 0, 0, 0, 1 )
text = "Speed: "

[node name="Braking" type="Label" parent="UI"]
margin_top = 176.0
margin_right = 100.0
margin_bottom = 204.0
custom_colors/font_color = Color( 0, 0, 0, 1 )
text = "Braking: "
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Engine" type="Label" parent="UI"]
margin_top = 204.0
margin_right = 100.0
margin_bottom = 232.0
custom_colors/font_color = Color( 0, 0, 0, 1 )
text = "Engine: "
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Brake" type="Label" parent="UI"]
margin_left = 2.0
margin_top = 232.0
margin_right = 102.0
margin_bottom = 260.0
custom_colors/font_color = Color( 0, 0, 0, 1 )
text = "Brake: "
__meta__ = {
"_edit_use_anchors_": false
}

[node name="RR_force" type="Label" parent="UI"]
margin_left = 2.0
margin_top = 260.0
margin_right = 102.0
margin_bottom = 288.0
custom_colors/font_color = Color( 0, 0, 0, 1 )
text = "RR Force:"
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Steering(L\\R)" type="Label" parent="UI"]
margin_left = -2.0
margin_top = 288.0
margin_right = 104.0
margin_bottom = 316.0
custom_colors/font_color = Color( 0, 0, 0, 1 )
text = "Steering angle(L, R):"

[node name="FR_Spring_Force" type="Line2D" parent="UI"]
points = PoolVector2Array( 0, 600 )
width = 2.0

[node name="RR_Spring_Force" type="Line2D" parent="UI"]
points = PoolVector2Array( 0, 600 )
width = 2.0
default_color = Color( 0.4, 1, 0.647059, 1 )

[node name="Camera" type="Camera" parent="."]
transform = Transform( 1, 0, 0, 0, 0.949612, 0.313429, 0, -0.313429, 0.949612, 0, 3.4577, -175.17 )
current = true
script = ExtResource( 4 )
car_path = NodePath("../Car")
back_offset = 4.0

[node name="Obstacle" parent="." instance=ExtResource( 6 )]
transform = Transform( 0.361625, 0, 0.932324, 0, 1, 0, -0.932324, 0, 0.361625, -0.803162, -1.28367, -481.332 )

[node name="Obstacle2" parent="." instance=ExtResource( 6 )]
transform = Transform( 0.313516, 0.498367, 0.808293, -0.180222, 0.866966, -0.464639, -0.932324, 0, 0.361625, -8.22008, -1.19954, -477.08 )

[node name="Obstacle3" parent="." instance=ExtResource( 6 )]
transform = Transform( -0.174092, -0.021553, 0.984493, -0.287664, 0.957264, -0.0299121, -0.941776, -0.288411, -0.172853, 3.03735, -0.95445, -477.08 )

[node name="Ramp" parent="." instance=ExtResource( 7 )]
transform = Transform( 0.967237, 0, -0.253876, 0, 1, 0, 0.253876, 0, 0.967237, -16.8384, 0.5, -471.115 )

[connection signal="update_offset" from="Car" to="." method="_on_Car_update_offset"]
